<!DOCTYPE html>
<html lang="en">
<head th:fragment="header">
	<title>Savings</title>
<script src="/resources/amcharts/amcharts.js" th:src="@{/resources/amcharts/amcharts.js}"
			type="text/javascript"></script>
		<script src="/resources/amcharts/pie.js" th:src="@{/resources/amcharts/pie.js}"
			type="text/javascript"></script>
		<script src="/resources/amcharts/serial.js" th:src="@{/resources/amcharts/serial.js}"
			type="text/javascript"></script>

		<script type="text/javascript" th:inline="javascript"
			th:if="${savings!=null and !savings.isEmpty()}">
/*<![CDATA[*/
var chart;
var legend;

var stackedChart = /*[[${savings}]]*/;  

AmCharts.ready(function () {
    var chart = new AmCharts.AmSerialChart();
    chart.dataProvider = stackedChart;
    chart.panEventsEnabled = false;
    chart.pathToImages = "/amcharts/images/";
    chart.categoryField = "title";
    chart.dataDateFormat = "DD/MM/YYYY";

    
    
    // AXES
    // category
    var categoryAxis = chart.categoryAxis;
    categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
    categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
    categoryAxis.gridAlpha = 0;
    categoryAxis.tickLength = 0;
    categoryAxis.axisAlpha = 0;

    // value
    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.dashLength = 4;
    valueAxis.axisAlpha = 0;
    valueAxis.unit = "\u20AC"; 
    valueAxis.unitPosition = "right";
    
    chart.addValueAxis(valueAxis);


    // FROM GRAPH
    var fromGraph = new AmCharts.AmGraph();
    fromGraph.type = "line";
    fromGraph.valueField = "fromValue";
    fromGraph.lineAlpha = 0;
    fromGraph.showBalloon = false;
    chart.addGraph(fromGraph);

    // TO GRAPH
    var toGraph = new AmCharts.AmGraph();
    toGraph.type = "line";
    toGraph.valueField = "toValue";
    toGraph.lineAlpha = 0;
    toGraph.fillAlphas = 0.2;
    toGraph.fillToGraph = fromGraph;
    toGraph.showBalloon = false;
    chart.addGraph(toGraph);


    // GRAPH
    var graph = new AmCharts.AmGraph();
    graph.type = "line";
    graph.valueField = "value";
    graph.lineColor = "#000000";
    chart.addGraph(graph);

    // CURSOR
    var chartCursor = new AmCharts.ChartCursor();
    chart.addChartCursor(chartCursor);

    chart.creditsPosition = "top-right";

    // WRITE
    chart.write("stackedChart");
});
/*]]>*/
</script>

</head>

<body>



	<div class="container" th:fragment="content">
		

			
		<div class="starter-template">
			<h1>Savings</h1>
			
			
			<div class="alert alert-warning" th:if="${savings==null or savings.isEmpty()}">
				No data available
			</div>
			<div class="table-responsive">
				<!-- 
				<table class="table" th:if="${savings!=null and !savings.isEmpty()}">
					<thead>
						<tr>
							<td>Date</td>
							<td>Amount</td>					
						</tr>
					</thead>
					<tbody>
						<tr th:each="saving : ${savings}">
							<th th:text="${#calendars.format(saving.date, 'dd/MM/yyyy')}"></th>
							<td th:text="${saving.realAmount}"></td>						 
						</tr>
					</tbody>
				
				</table>
				-->
			</div>
			<div id="stackedChart" class="chart" style="width: 100%; height: 400px;"></div>
		</div>

	</div>
	<!-- /.container -->

</body>
</html>

