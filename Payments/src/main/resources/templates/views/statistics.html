<!DOCTYPE html>
<html lang="en">
<head th:fragment="header">
	<title>Statistics</title>
	<script src="/resources/amcharts/amcharts.js" th:src="@{/resources/amcharts/amcharts.js}"
			type="text/javascript"></script>
		<script src="/resources/amcharts/pie.js" th:src="@{/resources/amcharts/pie.js}"
			type="text/javascript"></script>
		<script src="/resources/amcharts/serial.js" th:src="@{/resources/amcharts/serial.js}"
			type="text/javascript"></script>

		<script type="text/javascript" th:inline="javascript"
			th:if="${pieChart!=null and !pieChart.isEmpty()}">
/*<![CDATA[*/
var chart;
var legend;

var pieChart = /*[[${pieChart}]]*/;  

AmCharts.ready(function () {
    // PIE CHART
    
    var chart = AmCharts.makeChart("chartdiv",{
		"type"		: 		"pie",
		"titleField" : 		"title",
		"valueField" : 		"value",
		"outlineColor" :	"#FFFFFF",
	    "outlineAlpha":		0.8,
	    "outlineThickness" : 	2,   
	    "labelsEnabled" : false,
	    "panEventsEnabled": 	false,
		"dataProvider"	: pieChart,			
		"numberFormatter" : {
			"precision":2, 
			"decimalSeparator":',', 
			"thousandsSeparator":'.'
		},
		"depth3D" : 15,
		"angle" : 30
	});
    
    //var legend = new AmCharts.AmLegend();
    //chart.addLegend(legend);
    
    // WRITE
    chart.write("pieChart");
});
/*]]>*/
</script>

		<script type="text/javascript" th:inline="javascript"
			th:if="${stackedChart!=null and !stackedChart.isEmpty()}">
/*<![CDATA[*/
var chart;
var legend;

var stackedChart = /*[[${stackedChart}]]*/;  

AmCharts.ready(function () {
    var chart = new AmCharts.AmSerialChart();
    chart.dataProvider = stackedChart;
    chart.panEventsEnabled = false;
    chart.pathToImages = "/resources/amcharts/images/";
    chart.categoryField = "title";
    chart.dataDateFormat = "DD/MM/YYYY";

    // AXES
    // category
    var categoryAxis = chart.categoryAxis;
    categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
    categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
    categoryAxis.gridAlpha = 0;
    categoryAxis.tickLength = 0;
    categoryAxis.axisAlpha = 0;

    // value
    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.dashLength = 4;
    valueAxis.axisAlpha = 0;
    valueAxis.unit = "\u20AC"; 
    chart.addValueAxis(valueAxis);


    // FROM GRAPH
    var fromGraph = new AmCharts.AmGraph();
    fromGraph.type = "line";
    fromGraph.valueField = "fromValue";
    fromGraph.lineAlpha = 0;
    fromGraph.showBalloon = false;
    chart.addGraph(fromGraph);

    // TO GRAPH
    var toGraph = new AmCharts.AmGraph();
    toGraph.type = "line";
    toGraph.valueField = "toValue";
    toGraph.lineAlpha = 0;
    toGraph.fillAlphas = 0.2;
    toGraph.fillToGraph = fromGraph;
    toGraph.showBalloon = false;
    chart.addGraph(toGraph);


    // GRAPH
    var graph = new AmCharts.AmGraph();
    graph.type = "line";
    graph.valueField = "value";
    graph.lineColor = "#000000";
    chart.addGraph(graph);

    // CURSOR
    var chartCursor = new AmCharts.ChartCursor();
    chart.addChartCursor(chartCursor);

    chart.creditsPosition = "top-right";

    // WRITE
    chart.write("stackedChart");
});
/*]]>*/
</script>
	
</head>

<body>

	<div class="container" th:fragment="content">
		
		<div class="starter-template">
			
			<h1>Statistics</h1>
			<!-- 
			<ul class="nav nav-tabs" role="tablist" id="myTab">
			  <li role="presentation" class="active"><a href="#piechartTab" role="tab" data-toggle="tab">Pie Chart</a></li>
			  <li role="presentation"><a href="#stackedTab" aria-controls="profile" role="tab" data-toggle="tab">Stacked</a></li>		  
			</ul>
			<div class="tab-content">
			  	<div role="tabpanel" class="tab-pane active" id="piechartTab">
			  		<div class="alert alert-warning"
					th:if="${(pieChart==null or pieChart.isEmpty())}">
					No data available</div>
			  		
			  		<div id="pieChart" class="chart" style="width: 100%; height: 400px;"></div>
			  	</div>
				<div role="tabpanel" class="tab-pane" id="stackedTab">
					  <div class="alert alert-warning"
						th:if="${(stackedChart==null or stackedChart.isEmpty())}">
						No data available</div>
				  		<div id="stackedChart" class="chart" style="width: 100%; height: 400px;"></div>
				</div>
			</div>
			 -->
			<div class="alert alert-warning" th:if="${((pieChart==null or pieChart.isEmpty()) and (stackedChart==null or stackedChart.isEmpty()))}">
				No data available
			</div>
			<div id="pieChart" class="chart" style="width: 100%; height: 400px;"></div>
			<div id="stackedChart" class="chart" style="width: 100%; height: 400px;"></div>
		</div>

	</div>
	<!-- /.container -->

</body>
</html>

